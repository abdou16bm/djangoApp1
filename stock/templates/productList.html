{% extends 'base.html' %}

{% block content %}
<div class="content">
    <h1>Liste des produits : </h1>
    <table border="1">
        <thead>
            <tr>
                <th>Numero</th>
                <th>Nom</th>
                <th>Categorie</th>
                <th>Prix</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for product in productData %}
            <tr>
                <td>{{ product.id }}</td>
                <td>{{ product.name }}</td>
                <td>{{ product.category }}</td>
                <td>{{ product.price }}</td>
                <td>
                    <a href="/product/{{ product.id }}">Detail</a>
                    <a href="/product/{{ product.id }}/edit">Editer</a>
                    <a href="/product/{{ product.id }}/delete">Supprimer</a>
                    <button onclick="delProduct({{ product.id }})">Supprimer confirm</button>
                    <button id="btnDel">Supprimer optimal</button>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

</div>

<script>

    // selection du button
    const btnDel = document.querySelector('#btnDel');

    console.log(btnDel)

    // declaration de fonction
    const delProduct = function(id) {
        if ( confirm('est vous sure de vouloir supprimer ?') )
        {
            location.href = '/product/'+id+'/delete';
        }
    }

    // evenement
    btnDel.addEventListener('click',function(){
        delProduct(2)
    })

</script>

{% endblock%}



